<?php

namespace App\Providers;

use App\Support\Traits\SearchEngine;
use App\Providers\Contracts\{
    MediaProviderInterface,
    MediaProviderPropertiesInterface,
    MediaProviderRulesInterface,
    {% if MUST_HANDLE_RESPONSE %}HandleResponseInterface{% endif %}
};
use Psr\Http\Message\ResponseInterface;

class {{ CLASS_NAME }} implements MediaProviderInterface, MediaProviderPropertiesInterface, MediaProviderRulesInterface{% if MUST_HANDLE_RESPONSE %}, HandleResponseInterface {% endif %}

{
    use SearchEngine;

    public const BASE_URL = '{{ BASE_URL }}';

    public function searchEpisode(int $episodeNumber, int $season, string $slug): array
    {
        return $this->search($episodeNumber, $season, $slug);
    }

    public function isEmbed(): bool
    {
        return {{ IS_EMBED }};
    }

    public function hasAds(): bool
    {
        return {{ HAS_ADS }};
    }

    public function name(): string
    {
        return '{{ PROVIDER_NAME }}';
    }

    public function slug(): string
    {
        return '{{ PROVIDER_SLUG }}';
    }

    public function baseUrl(): string
    {
        return self::BASE_URL;
    }

    public function searchRequestMethod(): string
    {
        return '{{ SEARCH_REQUEST_METHOD }}';
    }

    public function getSearchEpisodeEndpoint(int $episode, int $season, string $slug): string
    {
        return self::BASE_URL;
    }

    public function canUsePrefix(): bool
    {
        return {{ CAN_USE_PREFIX }};
    }

    public function canUseSuffix(): bool
    {
        return {{ CAN_USE_SUFFIX }};
    }

    public function mustSerializeEpisode(): bool
    {
        return {{ MUST_SERIALIZE_EPISODE }};
    }

    public function mustHandleResponse(): bool
    {
        return {{ MUST_HANDLE_RESPONSE }};
    }

    public function responseHasError(ResponseInterface $response): bool
    {
        return false;
    }

{% if MUST_HANDLE_RESPONSE %}
    public function handleResponse(ResponseInterface $response): string
    {
        return 'url-to-video';
    }
{% endif %}
}
